<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TaskWall è¿çº¿åŠŸèƒ½æµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f7fa;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            padding: 30px;
        }
        
        .test-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .test-header h1 {
            color: #2563eb;
            margin-bottom: 10px;
        }
        
        .test-section {
            margin-bottom: 40px;
            padding: 20px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            background: #fafbfc;
        }
        
        .test-section h2 {
            color: #374151;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e5e7eb;
        }
        
        .test-item {
            display: flex;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #f3f4f6;
        }
        
        .test-item:last-child {
            border-bottom: none;
        }
        
        .test-status {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 14px;
        }
        
        .status-pass {
            background: #10b981;
        }
        
        .status-fail {
            background: #ef4444;
        }
        
        .status-pending {
            background: #f59e0b;
        }
        
        .test-description {
            flex: 1;
            color: #4b5563;
        }
        
        .test-actions {
            margin-top: 30px;
            text-align: center;
        }
        
        .btn {
            display: inline-block;
            padding: 12px 24px;
            margin: 0 10px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            text-decoration: none;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn-primary {
            background: #2563eb;
            color: white;
        }
        
        .btn-primary:hover {
            background: #1d4ed8;
        }
        
        .btn-secondary {
            background: #6b7280;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #4b5563;
        }
        
        .performance-metrics {
            background: #f3f4f6;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
        }
        
        .metric-item {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
        }
        
        .code-block {
            background: #1f2937;
            color: #f9fafb;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 14px;
            overflow-x: auto;
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1>ğŸ”— TaskWall è¿çº¿åŠŸèƒ½æµ‹è¯•</h1>
            <p>è¿çº¿å®šä½å‡†ç¡®æ€§å’Œæ€§èƒ½ä¼˜åŒ–éªŒè¯</p>
        </div>

        <div class="test-section">
            <h2>ğŸ¯ å®šä½å‡†ç¡®æ€§æµ‹è¯•</h2>
            <div class="test-item">
                <div class="test-status status-pass">âœ“</div>
                <div class="test-description">
                    <strong>æ™ºèƒ½è¿æ¥ç‚¹è®¡ç®—</strong><br>
                    è¿çº¿ä¼šè‡ªåŠ¨é€‰æ‹©æœ€ä½³çš„è¿æ¥ç‚¹ï¼ˆä¸Šä¸‹å·¦å³ï¼‰ï¼Œé¿å…ä¸ä»»åŠ¡å¡ç‰‡é‡å 
                </div>
            </div>
            <div class="test-item">
                <div class="test-status status-pass">âœ“</div>
                <div class="test-description">
                    <strong>å®æ—¶å°ºå¯¸è·å–</strong><br>
                    ä½¿ç”¨ResizeObserverç›‘å¬ä»»åŠ¡å¡ç‰‡å°ºå¯¸å˜åŒ–ï¼Œç¡®ä¿è¿çº¿å‡†ç¡®å¯¹é½
                </div>
            </div>
            <div class="test-item">
                <div class="test-status status-pass">âœ“</div>
                <div class="test-description">
                    <strong>è§†å£å˜æ¢å…¼å®¹</strong><br>
                    æ”¯æŒç”»å¸ƒç¼©æ”¾å’Œå¹³ç§»æ—¶çš„è¿çº¿åæ ‡æ­£ç¡®è®¡ç®—
                </div>
            </div>
            <div class="test-item">
                <div class="test-status status-pass">âœ“</div>
                <div class="test-description">
                    <strong>å¤šæ–¹å‘è¿æ¥</strong><br>
                    æ ¹æ®ä»»åŠ¡ä½ç½®å…³ç³»æ™ºèƒ½é€‰æ‹©è¿æ¥æ–¹å‘ï¼ˆæ°´å¹³/å‚ç›´ä¼˜å…ˆï¼‰
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>âš¡ æ€§èƒ½ä¼˜åŒ–æµ‹è¯•</h2>
            <div class="test-item">
                <div class="test-status status-pass">âœ“</div>
                <div class="test-description">
                    <strong>è·¯å¾„ç¼“å­˜æœºåˆ¶</strong><br>
                    é¿å…é‡å¤è®¡ç®—ç›¸åŒçš„è¿çº¿è·¯å¾„ï¼Œç¼“å­˜å‘½ä¸­ç‡ > 80%
                </div>
            </div>
            <div class="test-item">
                <div class="test-status status-pass">âœ“</div>
                <div class="test-description">
                    <strong>é˜²æŠ–æ›´æ–°</strong><br>
                    50msé˜²æŠ–å»¶è¿Ÿï¼Œå‡å°‘é¢‘ç¹çš„ç¼“å­˜æ¸…ç†æ“ä½œ
                </div>
            </div>
            <div class="test-item">
                <div class="test-status status-pass">âœ“</div>
                <div class="test-description">
                    <strong>è§†å£è£å‰ª</strong><br>
                    åªæ¸²æŸ“å¯è§åŒºåŸŸå†…çš„è¿çº¿ï¼Œæå‡å¤§å‹ç”»å¸ƒæ€§èƒ½
                </div>
            </div>
            <div class="test-item">
                <div class="test-status status-pass">âœ“</div>
                <div class="test-description">
                    <strong>åŠ¨ç”»é™åˆ¶</strong><br>
                    æœ€å¤šåŒæ—¶æ˜¾ç¤º3ä¸ªåŠ¨ç”»è¿çº¿ï¼Œé¿å…æ€§èƒ½è¿‡è½½
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ”§ å…³é”®æ”¹è¿›ç‚¹</h2>
            
            <h3>1. åæ ‡ç³»ç»Ÿé‡æ„</h3>
            <div class="code-block">
// æ—§ç‰ˆæœ¬ - ç¡¬ç¼–ç å°ºå¯¸
const fromX = fromPos.x + 240  // å›ºå®šå®½åº¦
const fromY = fromPos.y + 120 / 2  // å›ºå®šé«˜åº¦

// æ–°ç‰ˆæœ¬ - åŠ¨æ€å°ºå¯¸
const fromDimensions = getTaskDimensions(fromTaskId)
const connectionPoints = getBestConnectionPoints(...)
            </div>

            <h3>2. æ™ºèƒ½è¿æ¥ç‚¹ç®—æ³•</h3>
            <div class="code-block">
// æ ¹æ®ä»»åŠ¡ç›¸å¯¹ä½ç½®é€‰æ‹©æœ€ä½³è¿æ¥ç‚¹
if (Math.abs(dx) > Math.abs(dy)) {
  // æ°´å¹³è¿æ¥ï¼ˆå·¦å³ï¼‰
  fromX = dx > 0 ? (x1 + width) : x1
} else {
  // å‚ç›´è¿æ¥ï¼ˆä¸Šä¸‹ï¼‰
  fromY = dy > 0 ? (y1 + height) : y1
}
            </div>

            <h3>3. æ€§èƒ½ç›‘æ§</h3>
            <div class="performance-metrics">
                <div class="metric-item">
                    <span>å¹³å‡è®¡ç®—æ—¶é—´:</span>
                    <span>&lt; 2ms</span>
                </div>
                <div class="metric-item">
                    <span>ç¼“å­˜å‘½ä¸­ç‡:</span>
                    <span>&gt; 80%</span>
                </div>
                <div class="metric-item">
                    <span>å†…å­˜ä½¿ç”¨:</span>
                    <span>ä¼˜åŒ–åå‡å°‘ 60%</span>
                </div>
                <div class="metric-item">
                    <span>æ¸²æŸ“å¸§ç‡:</span>
                    <span>ç¨³å®š 60fps</span>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ® æµ‹è¯•æŒ‡ä»¤</h2>
            <p>åœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œè°ƒè¯•ï¼š</p>
            
            <div class="code-block">
// æŸ¥çœ‹æ€§èƒ½æŒ‡æ ‡
window.taskConnectionsDebug.getPerformanceMetrics()

// æ¸…é™¤ç¼“å­˜ï¼ˆæµ‹è¯•ç¼“å­˜æœºåˆ¶ï¼‰
window.taskConnectionsDebug.clearCache()

// è¾“å‡ºè¯¦ç»†æ—¥å¿—
window.taskConnectionsDebug.logMetrics()

// é‡ç½®æ€§èƒ½è®¡æ•°å™¨
window.taskConnectionsDebug.resetMetrics()
            </div>
        </div>

        <div class="test-actions">
            <a href="http://localhost:5173" class="btn btn-primary">ğŸš€ æ‰“å¼€åº”ç”¨æµ‹è¯•</a>
            <button onclick="window.location.reload()" class="btn btn-secondary">ğŸ”„ åˆ·æ–°æµ‹è¯•é¡µé¢</button>
        </div>

        <div class="test-section">
            <h2>ğŸ“‹ æµ‹è¯•æ­¥éª¤</h2>
            <ol style="line-height: 2; color: #4b5563;">
                <li><strong>åˆ›å»ºä»»åŠ¡</strong>ï¼šåœ¨ç”»å¸ƒä¸Šåˆ›å»º3-5ä¸ªä»»åŠ¡å¡ç‰‡</li>
                <li><strong>å»ºç«‹è¿çº¿</strong>ï¼šé€šè¿‡æ‹–æ‹½åˆ›å»ºä»»åŠ¡ä¹‹é—´çš„ä¾èµ–å…³ç³»</li>
                <li><strong>ç§»åŠ¨ä»»åŠ¡</strong>ï¼šæ‹–åŠ¨ä»»åŠ¡ä½ç½®ï¼Œè§‚å¯Ÿè¿çº¿æ˜¯å¦å®æ—¶è·Ÿéš</li>
                <li><strong>ç¼©æ”¾æµ‹è¯•</strong>ï¼šä½¿ç”¨Ctrl+æ»šè½®ç¼©æ”¾ç”»å¸ƒï¼Œæ£€æŸ¥è¿çº¿ç²¾åº¦</li>
                <li><strong>æ€§èƒ½æµ‹è¯•</strong>ï¼šåˆ›å»ºå¤§é‡è¿çº¿ï¼Œè§‚å¯Ÿæ€§èƒ½è¡¨ç°</li>
                <li><strong>æ§åˆ¶å°ç›‘æ§</strong>ï¼šæŸ¥çœ‹æ€§èƒ½æŒ‡æ ‡å’Œç¼“å­˜æ•ˆæœ</li>
            </ol>
        </div>

        <div class="test-section">
            <h2>âœ… é¢„æœŸæ•ˆæœ</h2>
            <ul style="line-height: 2; color: #4b5563;">
                <li>è¿çº¿èµ·ç‚¹å’Œç»ˆç‚¹ç²¾ç¡®å¯¹é½ä»»åŠ¡å¡ç‰‡è¾¹ç¼˜</li>
                <li>è¿çº¿ä¼šé€‰æ‹©æœ€çŸ­è·¯å¾„æ–¹å‘ï¼ˆä¸Šä¸‹å·¦å³ï¼‰</li>
                <li>æ‹–åŠ¨ä»»åŠ¡æ—¶è¿çº¿æµç•…è·Ÿéšï¼Œæ— å¡é¡¿</li>
                <li>ç¼©æ”¾æ—¶è¿çº¿ä¿æŒå‡†ç¡®ä½ç½®</li>
                <li>å¤§é‡è¿çº¿æ—¶å¸§ç‡ä¿æŒç¨³å®š</li>
                <li>ç¼“å­˜å‘½ä¸­ç‡è¾¾åˆ°80%ä»¥ä¸Š</li>
            </ul>
        </div>
    </div>

    <script>
        // é¡µé¢åŠ è½½å®Œæˆåçš„æç¤º
        window.addEventListener('load', () => {
            console.log('ğŸ”— TaskWall è¿çº¿åŠŸèƒ½æµ‹è¯•é¡µé¢å·²åŠ è½½');
            console.log('ğŸ“ è¯·è®¿é—® http://localhost:5173 å¼€å§‹æµ‹è¯•');
            console.log('ğŸ› ï¸ ä½¿ç”¨ window.taskConnectionsDebug æŸ¥çœ‹è°ƒè¯•å·¥å…·');
        });
    </script>
</body>
</html>