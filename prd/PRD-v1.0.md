# Task Wall â€“ PRD v1.0 (MVP Edition)

**Owner:** å¤§å“¥  **Created:** 2025-06-19  **Status:** Completed

> v1.0 MVPç‰ˆæœ¬ä¸“æ³¨äºæ ¸å¿ƒçš„"å¿«é€Ÿæ•è· + ä¾¿åˆ©è´´ç”»å¸ƒ"åŠŸèƒ½ï¼Œä¸ºå•äººPMæä¾›ç›´è§‚çš„ä»»åŠ¡ç®¡ç†å·¥å…·ã€‚

---

# MVP â€“ Lowâ€‘Fidelity Interaction Sketch & Task Breakdown

## 1 Â· Screen Layout (ASCII Wireframe)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Top Bar:  âŒ˜P Quickâ€‘Add | Search | Settings | Export | Backup â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Capture Panel (20%) â”‚         Stickyâ€‘Note Canvas (80%)        â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                                         â”‚
â”‚ [Text Input â–¸Parse]  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ P0 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚ [ğŸ“„ Img â–¸OCR]         â”‚   â”‚        Task A           â”‚â”€â”€â”€â”      â”‚
â”‚ [Inbox]              â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚      â”‚
â”‚                      â”‚                  â–²               â”‚      â”‚
â”‚                      â”‚                  â”‚               â”‚      â”‚
â”‚                      â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚      â”‚
â”‚                      â”‚        â”‚     Subtask      â”‚â—€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                      â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â–º  Right Drawer (Properties/History)
```

### äº¤äº’è¦ç‚¹

1. **æ‹–æ‹½**ï¼šå¡ç‰‡è‡ªç”±æ’åˆ—ï¼Œä¾èµ–è¿çº¿è‡ªåŠ¨å¸é™„ç«¯ç‚¹ã€‚
2. **é¢œè‰²ç¼–ç **ï¼šè¾¹æ¡†è‰² = æ¨¡å—æ ‡ç­¾ï¼›èƒŒæ™¯æ¸æ·± = ç´§æ€¥åº¦ P0â†’P4ã€‚
3. **ä¾§æ **ï¼šé€‰ä¸­å¡ç‰‡æ—¶å¼¹å‡ºå±æ€§é¢æ¿ï¼Œå¯ç¼–è¾‘æ ‡é¢˜/æè¿°/ç´§æ€¥åº¦/æ¨¡å—ï¼›åº•éƒ¨æ˜¾ç¤ºä¿®æ”¹å†å²ã€‚
4. **å¿«æ·é”®**ï¼š`âŒ˜P` èšç„¦è¾“å…¥æ¡†ï¼›`âŒ˜E` å¯¼å‡ºï¼›`âŒ˜B` æ‰‹åŠ¨å¤‡ä»½ã€‚

---

## 2 Â· ä¸»è¦æµç¨‹

| # | ç”¨æˆ·åŠ¨ä½œ        | ç³»ç»Ÿè¡Œä¸º                                 |
| - | ----------- | ------------------------------------ |
| 1 | ç²˜è´´æ–‡æœ¬æˆ–ä¸Šä¼ æˆªå›¾   | è°ƒç”¨ `/ai/parse` (Gemini) â†’ ç»“æ„åŒ–ä»»åŠ¡ JSON |
| 2 | AI è¾“å‡ºä»»åŠ¡æ ‘    | åœ¨ Inbox é¢„è§ˆ â†’ ç”¨æˆ·ç¡®è®¤                    |
| 3 | ç‚¹å‡»ã€Œåˆ›å»ºã€      | ç”Ÿæˆå¡ç‰‡ â†’ æŒ‰æ¨¡å—åˆ†åˆ—ã€ç´§æ€¥åº¦æ’åºåˆå§‹ä½ç½®               |
| 4 | æ‹–æ‹½/è¿çº¿/ç¼–è¾‘    | å®æ—¶æ›´æ–° SQLiteï¼›å†™ `history` è¡¨            |
| 5 | å¯¼å‡º          | ç”Ÿæˆ `.md` & `.json`ï¼›ä¸‹è½½æˆ–å­˜ `/backup`    |
| 6 | APScheduler | æ¯ 4h è§¦å‘å¤‡ä»½è„šæœ¬ï¼ŒåŒè·¯å¾„è¿½åŠ æ–°æ–‡ä»¶                 |

---

## 3 Â· æ•°æ®åº“ ER æ‘˜è¦

```
Task (id, title, desc, urgency, module_id, parent_id, created_at, updated_at, ocr_src)
Module (id, name, color)
History (id, task_id, field, old_val, new_val, ts)
Setting (key, value)
```

---

## 4 Â· Milestone Toâ€‘Do

| å‘¨æ¬¡ | æ¨¡å—       | ä»»åŠ¡                                        | è´Ÿè´£äºº   |
| -- | -------- | ----------------------------------------- | ----- |
| W1 | åŸºç¡€       | åˆå§‹åŒ– Repo / Dockerfile / FastAPI skeleton  | Dev   |
|    |          | SQLite schema (SQLModel) & CRUD endpoints | Dev   |
|    | Front    | Vue3 Vite scaffold, Routing, UI lib setup | Front |
| W2 | Front    | Stickyâ€‘note Canvas (vue3â€‘flowy) demo      | Front |
|    |          | Card component + drag / connect           | Front |
| W3 | AI & OCR | Integrate Tesseract (docker layer)        | Dev   |
|    |          | `/ai/parse` with Gemini key config        | Dev   |
| W4 | Data     | History log triggers                      | Dev   |
|    | Export   | Markdown + JSON export service            | Dev   |
|    | Cron     | APScheduler 4h backup                     | Dev   |
| W5 | Polish   | Settings page (API keys, backup interval) | Front |
|    | QA       | Edgeâ€‘case tests, performance tuning       | All   |
|    | Release  | v0.9 beta Docker image (<200 MB)          | Dev   |

---

## 5 Â· åç»­è¿­ä»£æ¸…å• (V1+)

* ç”˜ç‰¹/æ—¶é—´è½´è§†å›¾åˆ‡æ¢
* å¤šäººåä½œï¼ˆWebSocket + Yjsï¼‰
* æ—¥å†åŒæ­¥ & é€šçŸ¥ï¼ˆiCal / Feishu Botï¼‰
* AI ä¼°æ—¶ & å‘¨æŠ¥è‡ªåŠ¨ç”Ÿæˆ
* é”®ç›˜å¯¼èˆª + å…¨å±€æ¨¡ç³Šæœç´¢

---

## 6 Â· W1 Implementation Blueprint

### 6.1 Repository Structure

```
project-root/
â”œâ”€ docker-compose.yml
â”œâ”€ backend/
â”‚  â”œâ”€ Dockerfile
â”‚  â”œâ”€ app/
â”‚  â”‚  â”œâ”€ main.py          # FastAPI entry
â”‚  â”‚  â”œâ”€ models.py        # SQLModel tables
â”‚  â”‚  â”œâ”€ crud.py          # CRUD helpers
â”‚  â”‚  â”œâ”€ schemas.py       # Pydantic I/O models
â”‚  â”‚  â”œâ”€ deps.py          # DB session deps
â”‚  â”‚  â””â”€ utils/
â”‚  â”‚     â”œâ”€ ai_client.py  # Gemini/GPT client wrapper
â”‚  â”‚     â””â”€ ocr.py        # Tesseract wrapper
â”‚  â””â”€ requirements.txt
â”œâ”€ frontend/
â”‚  â”œâ”€ Dockerfile
â”‚  â”œâ”€ vite.config.ts
â”‚  â”œâ”€ index.html
â”‚  â””â”€ src/
â”‚     â”œâ”€ main.ts
â”‚     â”œâ”€ App.vue
â”‚     â”œâ”€ components/
â”‚     â”‚  â”œâ”€ StickyCanvas.vue
â”‚     â”‚  â”œâ”€ TaskCard.vue
â”‚     â”‚  â””â”€ RightDrawer.vue
â”‚     â””â”€ pages/
â”‚        â””â”€ Home.vue
â””â”€ README.md
```

### 6.2 Backend Key Files

* **main.py** â€“ mounts `/api` router, CORS, static export dir.
* **models.py** â€“ defines `Task`, `Module`, `History`, `Setting` tables.
* **crud.py** â€“ basic CRUD ops; wrapped with dependencyâ€‘injected DB session.
* **ai\_client.py** â€“ pluggable interface `{model, api_key}` â†’ `ask(prompt)`.
* **ocr.py** â€“ `def extract_text(img_bytes) -> str` using pytesseract with lang `eng+chi_sim`.

### 6.3 Frontend Highlights

* **vue3-flowy** for canvas; register as `<StickyCanvas />`.
* Pinia store `useTasks()` for realtime state synced to backend.
* `TaskCard.vue` emits `update` events â†’ REST `PATCH /tasks/{id}`.
* Hotkey plugin: `cmd+p`, `cmd+e`, `cmd+b`.

### 6.4 Docker Artifacts

**backend/Dockerfile**

```dockerfile
FROM python:3.12-slim AS base
RUN apt-get update && apt-get install -y tesseract-ocr tesseract-ocr-chi-sim && rm -rf /var/lib/apt/lists/*
WORKDIR /app
COPY backend/requirements.txt ./
RUN pip install --no-cache-dir -r requirements.txt
COPY backend/app ./app
CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "8000"]
```

**frontend/Dockerfile**

```dockerfile
FROM node:20-alpine AS builder
WORKDIR /web
COPY frontend/ .
RUN npm i -g pnpm && pnpm i && pnpm run build

FROM nginx:alpine
COPY --from=builder /web/dist /usr/share/nginx/html
EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
```

**docker-compose.yml**

```yaml
version: "3.8"
services:
  api:
    build: ./backend
    volumes:
      - ./data:/app/data
    environment:
      - TZ=Asia/Shanghai
    restart: unless-stopped
    ports:
      - "8000:8000"

  web:
    build: ./frontend
    depends_on:
      - api
    ports:
      - "3000:80"
    restart: unless-stopped
```

### 6.5 Quickstart

```bash
# 1. clone repo & enter
$ git clone <repo> task-wall && cd task-wall

# 2. build & run
$ docker compose up -d --build

# 3. visit http://localhost:3000
```

---

## 7 Â· Core Features Delivered

âœ… **å¿«é€Ÿä»»åŠ¡æ•è·** - AIè§£ææ–‡æœ¬å’Œå›¾ç‰‡ç”Ÿæˆä»»åŠ¡  
âœ… **ä¾¿åˆ©è´´ç”»å¸ƒ** - æ‹–æ‹½å¼ä»»åŠ¡ç®¡ç†ç•Œé¢  
âœ… **ä»»åŠ¡ä¾èµ–** - å¯è§†åŒ–è¿çº¿è¡¨ç¤ºä»»åŠ¡å…³ç³»  
âœ… **æ¨¡å—ç®¡ç†** - æŒ‰é¡¹ç›®/æ¨¡å—ç»„ç»‡ä»»åŠ¡  
âœ… **ä¼˜å…ˆçº§ç³»ç»Ÿ** - P0-P4ç´§æ€¥åº¦åˆ†çº§  
âœ… **å†å²è®°å½•** - å®Œæ•´çš„æ“ä½œå®¡è®¡æ—¥å¿—  
âœ… **æ•°æ®å¯¼å‡º** - Markdownå’ŒJSONæ ¼å¼å¯¼å‡º  
âœ… **è‡ªåŠ¨å¤‡ä»½** - å®šæ—¶å¤‡ä»½é˜²æ­¢æ•°æ®ä¸¢å¤±

---

**End of PRD v1.0** 