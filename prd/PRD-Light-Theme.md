# TaskWall – 浅色系改版整体调整方案 (v4.0)

> 目标：保留 n8n / Dify 的 **模块化节点 + 大画布 + 折叠侧栏** 交互框架，但以 **明亮柔和** 的配色与视觉层级呈现，避免暗色带来的压抑感与反差过大问题。

---

## 1 · 全局配色策略

| 语义 Token         | 新色值                            | 用途 & 备注                      |
| ---------------- | ------------------------------ | ---------------------------- |
| `--bg-base`      | `#F8F9FC`                      | 画布 & 页面主背景，超淡灰白，避免纯白让节点"漂"起来 |
| `--panel-bg`     | `#FFFFFF`                      | 侧栏、抽屉、顶部栏（卡片同色但用投影区分）        |
| `--grid-line`    | `rgba(0,0,0,0.05)`             | 16 px 隐形网格，拖动时显示参考           |
| `--card-bg`      | `#FFFFFF`                      | 节点卡片主体                       |
| `--card-shadow`  | `0 2px 6px rgba(16,24,40,.08)` | 更柔和、更短的阴影                    |
| `--primary`      | `#2563EB`                      | 主按钮 / 选中连线                   |
| `--danger` (P0)  | `#F87171`                      | 红系边框/徽章                      |
| `--warning` (P1) | `#FB923C`                      | 橙系                           |
| `--info` (P2)    | `#60A5FA`                      | 蓝系                           |
| `--success` (P3) | `#34D399`                      | 绿系                           |
| `--neutral` (文本) | `#1F2937`                      | 主文本深灰；标题 `font-weight: 600`  |

> **对比度**：正文与 `--panel-bg` 对比度 9.1≥4.5 (WCAG AA)。
> **语义**：仍用边框条 4 px 标示紧急度，但颜色饱和度降低 15%。

---

## 2 · 组件级修改

### 2.1 画布

* 背景渐变取消 → 使用纯 `--bg-base`；画布边缘加 8 px 内阴影，制造层次。
* Mini-map底色同步 `--bg-base`，节点点位使用淡灰框。

### 2.2 节点卡片

| 区域             | 新样式                                    | 设计要点                            |
| -------------- | -------------------------------------- | ------------------------------- |
| Header Strip   | 4 px 竖条 (左侧)                           | 左色条比顶色条更现代；圆角 `12 px` 不变        |
| Card Body      | `--card-bg`, 12 px 圆角, `--card-shadow` | 悬停加 `translateY(-2px)` + 阴影深度倍增 |
| Icons & Badges | 使用线性图标 (lucide) + `12 px` 圆形徽标         | 关键图标染 `--primary`               |

### 2.3 侧栏 & 抽屉

* 背景 `--panel-bg`; 投影与节点相同；主体区域 12 px 圆角。
* 折叠/展开箭头替换为简洁 chevron；鼠标 hover 变 `--primary`.

### 2.4 顶栏

* 留白增至 56 px 高；左侧 Logo + 产品名深灰，右侧 Settings/Icon 按钮变幽灵样式。
* Command-K 搜索栏：透明背景，获得焦点后填充 `#FFFFFF` + 1 px 内阴影，突显层级。

---

## 3 · 交互动画细调

| 行为   | 动画                  | 时长 / 曲线                          |
| ---- | ------------------- | -------------------------------- |
| 拖拽节点 | 阴影实时增深；释放回弹 100 ms  | `cubic-bezier(0.22, 1, 0.36, 1)` |
| 连线成功 | 端点闪白 180 ms         | `ease-out`                       |
| 侧栏切换 | Slide in/out 240 ms | `ease-in-out`                    |

---

## 4 · 实现步骤

| # | 模块                         | 任务                                                    | Owner  |
| - | -------------------------- | ----------------------------------------------------- | ------ |
| 1 | **Tailwind 主题**            | 新增 `light` 主题配置，定义上表 Tokens；默认 `data-theme=\"light\"` | FE     |
| 2 | **Canvas**                 | 背景色 & 网格线调整；增加外框阴影                                    | FE     |
| 3 | **NodeCard.vue**           | 左侧竖条取代顶色条；阴影 / hover / active 状态                      | FE     |
| 4 | **Panel.vue & TopBar.vue** | 明亮面板背景、幽灵按钮                                           | FE     |
| 5 | **Icon Update**            | 替换彩色 Material → 单线条 lucide                            | Design |
| 6 | **Regression**             | 100 节点渲染、拖拽性能回归（>55 fps）                              | QA     |

---

## 5 · 验证清单

1. **视觉**：对比暗色版，95% 受测用户认为"更轻盈"。
2. **可用性**：光线强环境下投影仍可辨识节点层次。
3. **布局**：不因浅色背景导致节点与面板间"漂浮"视觉断层。
4. **无暗色残留**：搜索、弹窗、Tooltip 等界面均已换肤。

---

> **后续**：如仍需夜间深色，可保留 `dark` 选项，通过 `Settings → Appearance` 切换，使用 CSS 变量即时替换以减少维护成本。

## 6 · 关键变更记录

### 6.1 配色变更对比

| 元素类型 | 原暗色配色 | 新浅色配色 | 变更原因 |
|---------|----------|----------|---------|
| 背景 | `#1F1F23` | `#F8F9FC` | 提升明亮度，减少视觉疲劳 |
| 卡片 | `#26262C` | `#FFFFFF` | 增强层次感，更清晰的边界 |
| 文字 | `#FFFFFF` | `#1F2937` | 深色文字在浅背景上对比度更高 |
| 阴影 | `rgba(0,0,0,0.25)` | `rgba(16,24,40,0.08)` | 柔和阴影，避免过强对比 |

### 6.2 布局优化

- **节点边框条位置**：从顶部横条改为左侧竖条，更符合现代设计趋势
- **阴影策略**：使用更柔和的阴影系统，营造轻盈感
- **间距调整**：增加各元素间的留白，提升呼吸感
- **图标系统**：统一使用线性图标风格

### 6.3 交互改进

- **悬停反馈**：减少过度动画，使用轻微的位移和阴影变化
- **焦点状态**：使用主色调高亮，保持一致性
- **加载状态**：使用骨架屏和微动效，提升体验

---

**实施时间**: 2025年6月20日
**版本**: v4.0
**负责人**: Claude Code Assistant